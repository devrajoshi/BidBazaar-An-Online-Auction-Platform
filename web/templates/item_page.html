{% extends "layouts/base.html" %}
{% load custom_tags %}

{% block body %}
      <main style="margin-top: 20px;">
        <section style="margin-top: 5px;">
          {% include "components/breadcrumb.html" %}
          <div style="display: flex; gap: 10px; margin-top: 30px;">
            <div style="max-width: 600px; max-height: 300px;">
              <img src="{% if bid.image and bid.image.url|startswith:"https://" %}{{ bid.image }}{% else %}/uploads/{{ bid.image }}{% endif %}" style="width: 100%; height: 100%; object-fit: cover;" />
            </div>
            <div>
							<h2 style="font-size: 30px;">{{ bid.title }}</h2>
							<p>{{ bid.description }}</p>
							<p>Price: ${{ bid.price }}</p>
							<p>Deadline: {{ bid.deadline_at }}</p>
              {% include "components/bid_or_bid_history.html" %}
            </div>
          </div>
        </section>
        <section style="margin-top: 10px;">
          <h2>Bidders</h2>
          <table id="bidders-table-{{ bid.id }}">
            <thead>
              <tr>
                <th>Bidder</th>
                <th>Bid Amount</th>
              </tr>
            </thead>
            <tbody>
              {% for bid in bids %}
                <tr>
                  <td>{{ bid.bidder.first_name }}</td>
                  <td>{{ bid.amount }}</td>
                </tr>
              {% empty %}
                <tr>
                  <td colspan="2">No bids yet</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </section>
      </main>
{% endblock %}
